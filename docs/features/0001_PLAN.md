# Feature 0001: User Type Selection and Onboarding Flow

## Description
After the splash screen, users will be directed to a user type selection screen where they choose between "Trainer" or "Get Fit" user types. Based on their selection, they will be guided through a 5-step onboarding process to collect personal information and preferences.

## Current State Analysis
- Splash screen currently redirects to `userTypeSelectionPath` for unauthenticated users
- User type selection screen exists but only has basic navigation logic
- Only `personal_info_screen.dart` exists in onboarding screens
- Route names are defined for all 5 onboarding steps but screens are missing

## Files to Create/Modify

### Phase 1: Data Layer
**Files to create:**
- `lib/features/onboarding/screens/fitness_goals_screen.dart` - Step 2: Fitness goals and experience level
- `lib/features/onboarding/screens/training_location_screen.dart` - Step 3: Training location and equipment
- `lib/features/onboarding/screens/training_routine_screen.dart` - Step 4: Training frequency and schedule
- `lib/features/onboarding/screens/nutrition_goals_screen.dart` - Step 5: Nutrition and lifestyle preferences

**Files to modify:**
- `lib/features/onboarding/screens/user_type_selection_screen.dart` - Update navigation logic to route to onboarding flow instead of signup
- `lib/features/onboarding/screens/personal_info_screen.dart` - Fix navigation to use proper route names and add data persistence

### Phase 2: Navigation Layer
**Files to modify:**
- `lib/navigation/app_router.dart` - Add routes for the 4 new onboarding screens
- `lib/core/services/settings_service.dart` - Add methods to store onboarding data

### Phase 3: Data Models
**Files to create:**
- `lib/core/models/onboarding_data.dart` - Model to store onboarding information

## Implementation Details

### User Type Selection Flow
1. **Splash Screen** → Redirects to `userTypeSelectionPath` for unauthenticated users
2. **User Type Selection** → User chooses "Trainer" or "Get Fit"
3. **Onboarding Flow** → 5-step process for "Get Fit" users, trainer-specific flow for "Trainer" users

### Onboarding Screens (5 Steps)
1. **Personal Info** (existing) - Name, date of birth, gender
2. **Fitness Goals** (new) - Main fitness goal, experience level, optional description
3. **Training Location** (new) - Gym/Home/Both, equipment available, optional details
4. **Training Routine** (new) - Days per week, session duration, preferred time
5. **Nutrition Goals** (new) - Activity level, sleep patterns, nutrition preferences

### Navigation Algorithm
```
Splash Screen → User Type Selection → Onboarding Flow → Home/Dashboard
```

**For "Get Fit" users:**
- Step 1: Personal Info → Step 2: Fitness Goals → Step 3: Training Location → Step 4: Training Routine → Step 5: Nutrition Goals → Home

**For "Trainer" users:**
- Existing trainer onboarding flow (unchanged)

### Data Persistence
- Use `SettingsService` to store onboarding preferences
- Create `OnboardingData` model to structure the collected information
- Save data after each step completion
- Mark onboarding as completed after final step

### Route Structure
- `/user-type-selection` - User type selection screen
- `/onboarding/personal-info` - Step 1
- `/onboarding/fitness-goals` - Step 2  
- `/onboarding/training-location` - Step 3
- `/onboarding/training-routine` - Step 4
- `/onboarding/nutrition-goals` - Step 5

### UI Components
- Reuse existing onboarding widgets: `ProgressHeader`, `InfoCard`, `CustomInputField`, `PrimaryButton`
- Create new widgets for specific input types (equipment selection, time picker, etc.)
- Maintain consistent design with dark theme and app colors

### Error Handling
- Form validation for required fields
- Graceful navigation with back button support
- Data persistence error handling
- Fallback navigation to home if onboarding fails

## Dependencies
- Existing onboarding widgets and components
- `SettingsService` for data persistence
- `AppColors` for consistent theming
- `GoRouter` for navigation
- `SupabaseService` for user data storage 